import{n as a,h as r,L as o,B as n,D as l}from"./index.5c4cb14.js";import{u}from"./IndicatorLibraryDialog.5c4cb14.js";import"./Tab.5c4cb14.js";const c={name:"PublishResourceDialog",components:{TransitionHeight:r,Loader:o,Btn:n},props:{item:{type:Object,required:!0}},mixins:[l],data(){return{dialogOpened:!1,isLoading:!1,errorMessage:null,output:null,repoUrl:"https://github.com/Tucsky/aggr-lib"}},computed:{prId(){return this.output?this.output.split("/").pop():""}},mounted(){this.show()},methods:{show(){this.dialogOpened=!0},hide(){this.isLoading||(this.dialogOpened=!1)},onHide(){this.close()},async submit(){if(!this.isLoading){this.errorMessage=null,this.isLoading=!0;try{const s=await u(this.item);this.output=s}catch(s){this.errorMessage=s.message}finally{this.isLoading=!1}}}}};var p=function(){var t=this,e=t._self._c;return e("form",{on:{submit:function(i){return i.preventDefault(),t.submit.apply(null,arguments)}}},[e("transition",{attrs:{name:"dialog",duration:500},on:{"after-leave":t.onHide}},[t.dialogOpened?e("Dialog",{staticClass:"publish-resource",attrs:{borderless:""},on:{clickOutside:t.hide},scopedSlots:t._u([{key:"header",fn:function(){return[e("div",{staticClass:"dialog__title"},[t._v(" Publish: "),e("code",[t._v(t._s(t.item.name))])])]},proxy:!0}],null,!1,320783052)},[e("transition-height",{attrs:{single:"",name:"transition-height-scale"}},[t.errorMessage?e("div",[e("div",{staticClass:"publish-resource__error"},[e("p",{staticClass:"mx0"},[e("i",{staticClass:"icon-warning mr8"}),t._v(" "+t._s(t.errorMessage)+" ")])])]):t._e()]),e("transition-height",{staticClass:"publish-resource__wrapper",attrs:{stepper:"",name:"slide-fade-right",duration:500,"fill-height":""}},[t.isLoading?e("div",{key:"loading",staticClass:"publish-resource__loading"},[e("loader",{staticClass:"mx0 -center"}),e("p",{staticClass:"mb0 mt0 ml16 text-color-50 -center"},[t._v(" Please wait a moment... ")])],1):t.output?e("div",{key:"completed",staticClass:"publish-resource__confirm"},[e("h3",{staticClass:"mx0"},[t._v("Thank you "+t._s(t.item.author)+" !")]),e("p",{staticClass:"mb0"},[t._v(" You can follow the review process on the "),e("i",{staticClass:"icon-github mr8"}),e("a",{attrs:{href:t.output,target:"_blank"}},[t._v("Github pull request")])]),e("Btn",{staticClass:"mt16 -theme -large mlauto mtauto",attrs:{href:t.output,target:"_blank"}},[t._v(" Open "),e("i",{staticClass:"icon-external-link-square-alt ml8"})])],1):e("div",{key:"onboarding",staticClass:"publish-resource__actions divider-container"},[e("Btn",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"-large -green -cases",attrs:{type:"submit",title:"Automatic contribuation"}},[e("i",{staticClass:"icon-upload mr8"}),t._v(" Upload now ")]),e("div",{staticClass:"divider divider--vertical"},[t._v("Or")]),e("Btn",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"-text -cases",attrs:{href:t.repoUrl,target:"_blank",title:"Manual contribution"}},[e("i",{staticClass:"icon-github mr8"}),t._v(" Contribute on Github ")])],1)])],1):t._e()],1)],1)},d=[],m=a(c,p,d,!1,null,"b20a66d9",null,null);const v=m.exports;export{v as default};

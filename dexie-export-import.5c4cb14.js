import{Dexie as Oe}from"./dexie.min.5c4cb14.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Re(d,f,s,p){function h(c){return c instanceof s?c:new s(function(i){i(c)})}return new(s||(s=Promise))(function(c,i){function I(C){try{o(p.next(C))}catch(q){i(q)}}function U(C){try{o(p.throw(C))}catch(q){i(q)}}function o(C){C.done?c(C.value):h(C.value).then(I,U)}o((p=p.apply(d,f||[])).next())})}function Ue(d,f){var s={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},p,h,c,i;return i={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function I(o){return function(C){return U([o,C])}}function U(o){if(p)throw new TypeError("Generator is already executing.");for(;s;)try{if(p=1,h&&(c=o[0]&2?h.return:o[0]?h.throw||((c=h.return)&&c.call(h),0):h.next)&&!(c=c.call(h,o[1])).done)return c;switch(h=0,c&&(o=[o[0]&2,c.value]),o[0]){case 0:case 1:c=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,h=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(c=s.trys,!(c=c.length>0&&c[c.length-1])&&(o[0]===6||o[0]===2)){s=0;continue}if(o[0]===3&&(!c||o[1]>c[0]&&o[1]<c[3])){s.label=o[1];break}if(o[0]===6&&s.label<c[1]){s.label=c[1],c=o;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push(o);break}c[2]&&s.ops.pop(),s.trys.pop();continue}o=f.call(d,s)}catch(C){o=[6,C],h=0}finally{p=c=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function st(d){var f=[d.schema.primKey].concat(d.schema.indexes);return f.map(function(s){return s.src}).join(",")}function ut(d){for(var f={},s=0,p=d.tables;s<p.length;s++){var h=p[s];f[h.name]=h.schema}return f}function ze(d,f){return new Promise(function(s,p){var h=new FileReader;h.onabort=function(c){return p(new Error("file read aborted"))},h.onerror=function(c){return p(c.target.error)},h.onload=function(c){return s(c.target.result)},f==="binary"?h.readAsArrayBuffer(d):h.readAsText(d)})}function We(d,f){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var s=new FileReaderSync,p=f==="binary"?s.readAsArrayBuffer(d):s.readAsText(d);return p}var $e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qe(d,f){return f={exports:{}},d(f,f.exports),f.exports}var Ke=qe(function(d,f){(function(s,p){d.exports=p()})($e,function(){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},p=function(){return function(b,n){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return function(v,u){var H=[],J=!0,ce=!1,te=void 0;try{for(var P,_=v[Symbol.iterator]();!(J=(P=_.next()).done)&&(H.push(P.value),!u||H.length!==u);J=!0);}catch(x){ce=!0,te=x}finally{try{!J&&_.return&&_.return()}finally{if(ce)throw te}}return H}(b,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(b){if(Array.isArray(b)){for(var n=0,e=Array(b.length);n<b.length;n++)e[n]=b[n];return e}return Array.from(b)},c=Object.keys,i=Array.isArray,I={}.toString,U=Object.getPrototypeOf,o={}.hasOwnProperty,C=o.toString,q=["type","replaced","iterateIn","iterateUnsetNumeric"];function _e(b,n){return w.isObject(b)&&typeof b.then=="function"&&(!n||typeof b.catch=="function")}function se(b){return I.call(b).slice(8,-1)}function F(b,n){if(!b||(b===void 0?"undefined":s(b))!=="object")return!1;var e=U(b);if(!e)return!1;var v=o.call(e,"constructor")&&e.constructor;return typeof v!="function"?n===null:typeof v=="function"&&n!==null&&C.call(v)===C.call(n)}function $(b){return!(!b||se(b)!=="Object")&&(!U(b)||F(b,Object))}function Q(b){return b&&(b===void 0?"undefined":s(b))==="object"}function w(b){var n=[],e=[],v={},u=this.types={},H=this.stringify=function(P,_,x,M){M=Object.assign({},b,M,{stringification:!0});var z=ce(P,null,M);return i(z)?JSON.stringify(z[0],_,x):z.then(function(B){return JSON.stringify(B,_,x)})};this.stringifySync=function(P,_,x,M){return H(P,_,x,Object.assign({},{throwOnBadSyncType:!0},M,{sync:!0}))},this.stringifyAsync=function(P,_,x,M){return H(P,_,x,Object.assign({},{throwOnBadSyncType:!0},M,{sync:!1}))};var J=this.parse=function(P,_,x){return x=Object.assign({},b,x,{parse:!0}),te(JSON.parse(P,_),x)};this.parseSync=function(P,_,x){return J(P,_,Object.assign({},{throwOnBadSyncType:!0},x,{sync:!0}))},this.parseAsync=function(P,_,x){return J(P,_,Object.assign({},{throwOnBadSyncType:!0},x,{sync:!1}))},this.specialTypeNames=function(P,_){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return x.returnTypeNames=!0,this.encapsulate(P,_,x)},this.rootTypeName=function(P,_){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return x.iterateNone=!0,this.encapsulate(P,_,x)};var ce=this.encapsulate=function(P,_,x){var M=(x=Object.assign({sync:!0},b,x)).sync,z={},B=[],be=[],ne=[],ye=!(x&&"cyclic"in x)||x.cyclic,re=x.encapsulateObserver,ie=a("",P,ye,_||{},ne);function r(l){var y=Object.values(z);if(x.iterateNone)return y.length?y[0]:w.getJSONType(l);if(y.length){if(x.returnTypeNames)return[].concat(h(new Set(y)));l&&$(l)&&!l.hasOwnProperty("$types")?l.$types=z:l={$:l,$types:{$:z}}}else Q(l)&&l.hasOwnProperty("$types")&&(l={$:l,$types:!0});return!x.returnTypeNames&&l}return ne.length?M&&x.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(function l(y,S){return Promise.all(S.map(function(O){return O[1].p})).then(function(O){return Promise.all(O.map(function(K){var A=[],N=S.splice(0,1)[0],m=p(N,7),k=m[0],G=m[2],g=m[3],oe=m[4],ae=m[5],Ae=m[6],de=a(k,K,G,g,A,!0,Ae),Y=F(de,R);return k&&Y?de.p.then(function(he){return oe[ae]=he,l(y,A)}):(k?oe[ae]=de:y=Y?de.p:de,l(y,A))}))}).then(function(){return y})}(ie,ne)).then(r):!M&&x.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():x.stringification&&M?[r(ie)]:M?r(ie):Promise.resolve(r(ie));function t(l,y,S){Object.assign(l,y);var O=q.map(function(K){var A=l[K];return delete l[K],A});S(),q.forEach(function(K,A){l[K]=O[A]})}function a(l,y,S,O,K,A,N){var m=void 0,k={},G=y===void 0?"undefined":s(y),g=re?function(T){var V=N||O.type||w.getJSONType(y);re(Object.assign(T||k,{keypath:l,value:y,cyclic:S,stateObj:O,promisesData:K,resolvingTypesonPromise:A,awaitingTypesonPromise:F(y,R)},V!==void 0?{type:V}:{}))}:null;if(G in{string:1,boolean:1,number:1,undefined:1})return y===void 0||G==="number"&&(isNaN(y)||y===-1/0||y===1/0)?(m=E(l,y,O,K,!1,A,g))!==y&&(k={replaced:m}):m=y,g&&g(),m;if(y===null)return g&&g(),y;if(S&&!O.iterateIn&&!O.iterateUnsetNumeric){var oe=B.indexOf(y);if(!(oe<0))return z[l]="#",g&&g({cyclicKeypath:be[oe]}),"#"+be[oe];S===!0&&(B.push(y),be.push(l))}var ae=$(y),Ae=i(y),de=(ae||Ae)&&(!n.length||O.replaced)||O.iterateIn?y:E(l,y,O,K,ae||Ae,null,g),Y=void 0;if(de!==y?(m=de,k={replaced:de}):Ae||O.iterateIn==="array"?(Y=new Array(y.length),k={clone:Y}):ae||O.iterateIn==="object"?k={clone:Y={}}:(l===""&&F(y,R)&&K.push([l,y,S,O,void 0,void 0,O.type]),m=y),g&&g(),x.iterateNone)return Y||m;if(!Y)return m;if(O.iterateIn){var he=function(V){var j={ownKeys:y.hasOwnProperty(V)};t(O,j,function(){var Z=l+(l?".":"")+ee(V),ue=a(Z,y[V],!!S,O,K,A);F(ue,R)?K.push([Z,ue,!!S,O,Y,V,O.type]):ue!==void 0&&(Y[V]=ue)})};for(var Te in y)he(Te);g&&g({endIterateIn:!0,end:!0})}else c(y).forEach(function(T){var V=l+(l?".":"")+ee(T);t(O,{ownKeys:!0},function(){var j=a(V,y[T],!!S,O,K,A);F(j,R)?K.push([V,j,!!S,O,Y,T,O.type]):j!==void 0&&(Y[T]=j)})}),g&&g({endIterateOwn:!0,end:!0});if(O.iterateUnsetNumeric){for(var ve=y.length,Be=function(V){if(!(V in y)){var j=l+(l?".":"")+V;t(O,{ownKeys:!1},function(){var Z=a(j,void 0,!!S,O,K,A);F(Z,R)?K.push([j,Z,!!S,O,Y,V,O.type]):Z!==void 0&&(Y[V]=Z)})}},L=0;L<ve;L++)Be(L);g&&g({endIterateUnsetNumeric:!0,end:!0})}return Y}function E(l,y,S,O,K,A,N){for(var m=K?n:e,k=m.length;k--;){var G=m[k];if(G.test(y,S)){var g=G.type;if(v[g]){var oe=z[l];z[l]=oe?[g].concat(oe):g}return Object.assign(S,{type:g,replaced:!0}),!M&&G.replaceAsync||G.replace?(N&&N({replacing:!0}),a(l,G[M||!G.replaceAsync?"replace":"replaceAsync"](y,S),ye&&"readonly",S,O,A,g)):(N&&N({typeDetected:!0}),a(l,y,ye&&"readonly",S,O,A,g))}}return y}};this.encapsulateSync=function(P,_,x){return ce(P,_,Object.assign({},{throwOnBadSyncType:!0},x,{sync:!0}))},this.encapsulateAsync=function(P,_,x){return ce(P,_,Object.assign({},{throwOnBadSyncType:!0},x,{sync:!1}))};var te=this.revive=function(P,_){var x=(_=Object.assign({sync:!0},b,_)).sync,M=P&&P.$types,z=!0;if(!M)return P;if(M===!0)return P.$;M.$&&$(M.$)&&(P=P.$,M=M.$,z=!1);var B=[],be={},ne=function ye(re,ie,r,t,a,E){if(!(z&&re==="$types")){var l=M[re];if(i(ie)||$(ie)){var y=i(ie)?new Array(ie.length):{};for(c(ie).forEach(function(g){var oe=ye(re+(re?".":"")+ee(g),ie[g],r||y,t,y,g);F(oe,pe)?y[g]=void 0:oe!==void 0&&(y[g]=oe)}),ie=y;B.length;){var S=p(B[0],4),O=S[0],K=S[1],A=S[2],N=S[3],m=D(O,K);if(F(m,pe))A[N]=void 0;else{if(m===void 0)break;A[N]=m}B.splice(0,1)}}if(!l)return ie;if(l==="#"){var k=D(r,ie.substr(1));return k===void 0&&B.push([r,ie.substr(1),a,E]),k}var G=t.sync;return[].concat(l).reduce(function(g,oe){var ae=v[oe];if(!ae)throw new Error("Unregistered type: "+oe);return ae[G&&ae.revive?"revive":!G&&ae.reviveAsync?"reviveAsync":"revive"](g,be)},ie)}}("",P,null,_);return _e(ne=F(ne,pe)?void 0:ne)?x&&_.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():ne:!x&&_.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():x?ne:Promise.resolve(ne)};this.reviveSync=function(P,_){return te(P,Object.assign({},{throwOnBadSyncType:!0},_,{sync:!0}))},this.reviveAsync=function(P,_){return te(P,Object.assign({},{throwOnBadSyncType:!0},_,{sync:!1}))},this.register=function(P,_){return _=_||{},[].concat(P).forEach(function x(M){if(i(M))return M.map(x);M&&c(M).forEach(function(z){if(z==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(w.JSON_TYPES.includes(z))throw new TypeError("Plain JSON object types are reserved as type names");var B=M[z],be=B.testPlainObjects?n:e,ne=be.filter(function(t){return t.type===z});if(ne.length&&(be.splice(be.indexOf(ne[0]),1),delete v[z],delete u[z]),B){if(typeof B=="function"){var ye=B;B={test:function(a){return a&&a.constructor===ye},replace:function(a){return fe({},a)},revive:function(a){return fe(Object.create(ye.prototype),a)}}}else i(B)&&(B={test:B[0],replace:B[1],revive:B[2]});var re={type:z,test:B.test.bind(B)};B.replace&&(re.replace=B.replace.bind(B)),B.replaceAsync&&(re.replaceAsync=B.replaceAsync.bind(B));var ie=typeof _.fallback=="number"?_.fallback:_.fallback?0:1/0;if(B.testPlainObjects?n.splice(ie,0,re):e.splice(ie,0,re),B.revive||B.reviveAsync){var r={};B.revive&&(r.revive=B.revive.bind(B)),B.reviveAsync&&(r.reviveAsync=B.reviveAsync.bind(B)),v[z]=r}u[z]=B}})}),this}}function fe(b,n){return c(n).map(function(e){b[e]=n[e]}),b}function ee(b){return b.replace(/~/g,"~0").replace(/\./g,"~1")}function W(b){return b.replace(/~1/g,".").replace(/~0/g,"~")}function D(b,n){if(n==="")return b;var e=n.indexOf(".");if(e>-1){var v=b[W(n.substr(0,e))];return v===void 0?void 0:D(v,n.substr(e+1))}return b[W(n)]}function pe(){}function R(b){this.p=new Promise(b)}return R.prototype.then=function(b,n){var e=this;return new R(function(v,u){e.p.then(function(H){v(b?b(H):H)},function(H){e.p.catch(function(J){return n?n(J):Promise.reject(J)}).then(v,u)})})},R.prototype.catch=function(b){return this.then(null,b)},R.resolve=function(b){return new R(function(n){n(b)})},R.reject=function(b){return new R(function(n,e){e(b)})},["all","race"].map(function(b){R[b]=function(n){return new R(function(e,v){Promise[b](n.map(function(u){return u.p})).then(e,v)})}}),w.Undefined=pe,w.Promise=R,w.isThenable=_e,w.toStringTag=se,w.hasConstructorOf=F,w.isObject=Q,w.isPlainObject=$,w.isUserObject=function b(n){if(!n||se(n)!=="Object")return!1;var e=U(n);return!e||F(n,Object)||b(e)},w.escapeKeyPathComponent=ee,w.unescapeKeyPathComponent=W,w.getByKeyPath=D,w.getJSONType=function(b){return b===null?"null":i(b)?"array":b===void 0?"undefined":s(b)},w.JSON_TYPES=["null","boolean","number","string","array","object"],w})}),ct=qe(function(d,f){(function(s,p){d.exports=p()})($e,function(){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},p=function(){return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(E,l){var y=[],S=!0,O=!1,K=void 0;try{for(var A,N=E[Symbol.iterator]();!(S=(A=N.next()).done)&&(y.push(A.value),!l||y.length!==l);S=!0);}catch(m){O=!0,K=m}finally{try{!S&&N.return&&N.return()}finally{if(O)throw K}}return y}(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(r){if(Array.isArray(r)){for(var t=0,a=Array(r.length);t<r.length;t++)a[t]=r[t];return a}return Array.from(r)},c=Object.keys,i=Array.isArray,I={}.toString,U=Object.getPrototypeOf,o={}.hasOwnProperty,C=o.toString,q=["type","replaced","iterateIn","iterateUnsetNumeric"];function _e(r,t){return w.isObject(r)&&typeof r.then=="function"&&(!t||typeof r.catch=="function")}function se(r){return I.call(r).slice(8,-1)}function F(r,t){if(!r||(r===void 0?"undefined":s(r))!=="object")return!1;var a=U(r);if(!a)return!1;var E=o.call(a,"constructor")&&a.constructor;return typeof E!="function"?t===null:typeof E=="function"&&t!==null&&C.call(E)===C.call(t)}function $(r){return!(!r||se(r)!=="Object")&&(!U(r)||F(r,Object))}function Q(r){return r&&(r===void 0?"undefined":s(r))==="object"}function w(r){var t=[],a=[],E={},l=this.types={},y=this.stringify=function(A,N,m,k){k=Object.assign({},r,k,{stringification:!0});var G=O(A,null,k);return i(G)?JSON.stringify(G[0],N,m):G.then(function(g){return JSON.stringify(g,N,m)})};this.stringifySync=function(A,N,m,k){return y(A,N,m,Object.assign({},{throwOnBadSyncType:!0},k,{sync:!0}))},this.stringifyAsync=function(A,N,m,k){return y(A,N,m,Object.assign({},{throwOnBadSyncType:!0},k,{sync:!1}))};var S=this.parse=function(A,N,m){return m=Object.assign({},r,m,{parse:!0}),K(JSON.parse(A,N),m)};this.parseSync=function(A,N,m){return S(A,N,Object.assign({},{throwOnBadSyncType:!0},m,{sync:!0}))},this.parseAsync=function(A,N,m){return S(A,N,Object.assign({},{throwOnBadSyncType:!0},m,{sync:!1}))},this.specialTypeNames=function(A,N){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return m.returnTypeNames=!0,this.encapsulate(A,N,m)},this.rootTypeName=function(A,N){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return m.iterateNone=!0,this.encapsulate(A,N,m)};var O=this.encapsulate=function(A,N,m){var k=(m=Object.assign({sync:!0},r,m)).sync,G={},g=[],oe=[],ae=[],Ae=!(m&&"cyclic"in m)||m.cyclic,de=m.encapsulateObserver,Y=ve("",A,Ae,N||{},ae);function he(L){var T=Object.values(G);if(m.iterateNone)return T.length?T[0]:w.getJSONType(L);if(T.length){if(m.returnTypeNames)return[].concat(h(new Set(T)));L&&$(L)&&!L.hasOwnProperty("$types")?L.$types=G:L={$:L,$types:{$:G}}}else Q(L)&&L.hasOwnProperty("$types")&&(L={$:L,$types:!0});return!m.returnTypeNames&&L}return ae.length?k&&m.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(function L(T,V){return Promise.all(V.map(function(j){return j[1].p})).then(function(j){return Promise.all(j.map(function(Z){var ue=[],Pe=V.splice(0,1)[0],le=p(Pe,7),we=le[0],Se=le[2],X=le[3],me=le[4],Ce=le[5],De=le[6],xe=ve(we,Z,Se,X,ue,!0,De),Ee=F(xe,R);return we&&Ee?xe.p.then(function(He){return me[Ce]=He,L(T,ue)}):(we?me[Ce]=xe:T=Ee?xe.p:xe,L(T,ue))}))}).then(function(){return T})}(Y,ae)).then(he):!k&&m.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():m.stringification&&k?[he(Y)]:k?he(Y):Promise.resolve(he(Y));function Te(L,T,V){Object.assign(L,T);var j=q.map(function(Z){var ue=L[Z];return delete L[Z],ue});V(),q.forEach(function(Z,ue){L[Z]=j[ue]})}function ve(L,T,V,j,Z,ue,Pe){var le=void 0,we={},Se=T===void 0?"undefined":s(T),X=de?function(Le){var ge=Pe||j.type||w.getJSONType(T);de(Object.assign(Le||we,{keypath:L,value:T,cyclic:V,stateObj:j,promisesData:Z,resolvingTypesonPromise:ue,awaitingTypesonPromise:F(T,R)},ge!==void 0?{type:ge}:{}))}:null;if(Se in{string:1,boolean:1,number:1,undefined:1})return T===void 0||Se==="number"&&(isNaN(T)||T===-1/0||T===1/0)?(le=Be(L,T,j,Z,!1,ue,X))!==T&&(we={replaced:le}):le=T,X&&X(),le;if(T===null)return X&&X(),T;if(V&&!j.iterateIn&&!j.iterateUnsetNumeric){var me=g.indexOf(T);if(!(me<0))return G[L]="#",X&&X({cyclicKeypath:oe[me]}),"#"+oe[me];V===!0&&(g.push(T),oe.push(L))}var Ce=$(T),De=i(T),xe=(Ce||De)&&(!t.length||j.replaced)||j.iterateIn?T:Be(L,T,j,Z,Ce||De,null,X),Ee=void 0;if(xe!==T?(le=xe,we={replaced:xe}):De||j.iterateIn==="array"?(Ee=new Array(T.length),we={clone:Ee}):Ce||j.iterateIn==="object"?we={clone:Ee={}}:(L===""&&F(T,R)&&Z.push([L,T,V,j,void 0,void 0,j.type]),le=T),X&&X(),m.iterateNone)return Ee||le;if(!Ee)return le;if(j.iterateIn){var He=function(ge){var Ie={ownKeys:T.hasOwnProperty(ge)};Te(j,Ie,function(){var je=L+(L?".":"")+ee(ge),Fe=ve(je,T[ge],!!V,j,Z,ue);F(Fe,R)?Z.push([je,Fe,!!V,j,Ee,ge,j.type]):Fe!==void 0&&(Ee[ge]=Fe)})};for(var it in T)He(it);X&&X({endIterateIn:!0,end:!0})}else c(T).forEach(function(Le){var ge=L+(L?".":"")+ee(Le);Te(j,{ownKeys:!0},function(){var Ie=ve(ge,T[Le],!!V,j,Z,ue);F(Ie,R)?Z.push([ge,Ie,!!V,j,Ee,Le,j.type]):Ie!==void 0&&(Ee[Le]=Ie)})}),X&&X({endIterateOwn:!0,end:!0});if(j.iterateUnsetNumeric){for(var ot=T.length,at=function(ge){if(!(ge in T)){var Ie=L+(L?".":"")+ge;Te(j,{ownKeys:!1},function(){var je=ve(Ie,void 0,!!V,j,Z,ue);F(je,R)?Z.push([Ie,je,!!V,j,Ee,ge,j.type]):je!==void 0&&(Ee[ge]=je)})}},Je=0;Je<ot;Je++)at(Je);X&&X({endIterateUnsetNumeric:!0,end:!0})}return Ee}function Be(L,T,V,j,Z,ue,Pe){for(var le=Z?t:a,we=le.length;we--;){var Se=le[we];if(Se.test(T,V)){var X=Se.type;if(E[X]){var me=G[L];G[L]=me?[X].concat(me):X}return Object.assign(V,{type:X,replaced:!0}),!k&&Se.replaceAsync||Se.replace?(Pe&&Pe({replacing:!0}),ve(L,Se[k||!Se.replaceAsync?"replace":"replaceAsync"](T,V),Ae&&"readonly",V,j,ue,X)):(Pe&&Pe({typeDetected:!0}),ve(L,T,Ae&&"readonly",V,j,ue,X))}}return T}};this.encapsulateSync=function(A,N,m){return O(A,N,Object.assign({},{throwOnBadSyncType:!0},m,{sync:!0}))},this.encapsulateAsync=function(A,N,m){return O(A,N,Object.assign({},{throwOnBadSyncType:!0},m,{sync:!1}))};var K=this.revive=function(A,N){var m=(N=Object.assign({sync:!0},r,N)).sync,k=A&&A.$types,G=!0;if(!k)return A;if(k===!0)return A.$;k.$&&$(k.$)&&(A=A.$,k=k.$,G=!1);var g=[],oe={},ae=function Ae(de,Y,he,Te,ve,Be){if(!(G&&de==="$types")){var L=k[de];if(i(Y)||$(Y)){var T=i(Y)?new Array(Y.length):{};for(c(Y).forEach(function(X){var me=Ae(de+(de?".":"")+ee(X),Y[X],he||T,Te,T,X);F(me,pe)?T[X]=void 0:me!==void 0&&(T[X]=me)}),Y=T;g.length;){var V=p(g[0],4),j=V[0],Z=V[1],ue=V[2],Pe=V[3],le=D(j,Z);if(F(le,pe))ue[Pe]=void 0;else{if(le===void 0)break;ue[Pe]=le}g.splice(0,1)}}if(!L)return Y;if(L==="#"){var we=D(he,Y.substr(1));return we===void 0&&g.push([he,Y.substr(1),ve,Be]),we}var Se=Te.sync;return[].concat(L).reduce(function(X,me){var Ce=E[me];if(!Ce)throw new Error("Unregistered type: "+me);return Ce[Se&&Ce.revive?"revive":!Se&&Ce.reviveAsync?"reviveAsync":"revive"](X,oe)},Y)}}("",A,null,N);return _e(ae=F(ae,pe)?void 0:ae)?m&&N.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():ae:!m&&N.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():m?ae:Promise.resolve(ae)};this.reviveSync=function(A,N){return K(A,Object.assign({},{throwOnBadSyncType:!0},N,{sync:!0}))},this.reviveAsync=function(A,N){return K(A,Object.assign({},{throwOnBadSyncType:!0},N,{sync:!1}))},this.register=function(A,N){return N=N||{},[].concat(A).forEach(function m(k){if(i(k))return k.map(m);k&&c(k).forEach(function(G){if(G==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(w.JSON_TYPES.includes(G))throw new TypeError("Plain JSON object types are reserved as type names");var g=k[G],oe=g.testPlainObjects?t:a,ae=oe.filter(function(Te){return Te.type===G});if(ae.length&&(oe.splice(oe.indexOf(ae[0]),1),delete E[G],delete l[G]),g){if(typeof g=="function"){var Ae=g;g={test:function(ve){return ve&&ve.constructor===Ae},replace:function(ve){return fe({},ve)},revive:function(ve){return fe(Object.create(Ae.prototype),ve)}}}else i(g)&&(g={test:g[0],replace:g[1],revive:g[2]});var de={type:G,test:g.test.bind(g)};g.replace&&(de.replace=g.replace.bind(g)),g.replaceAsync&&(de.replaceAsync=g.replaceAsync.bind(g));var Y=typeof N.fallback=="number"?N.fallback:N.fallback?0:1/0;if(g.testPlainObjects?t.splice(Y,0,de):a.splice(Y,0,de),g.revive||g.reviveAsync){var he={};g.revive&&(he.revive=g.revive.bind(g)),g.reviveAsync&&(he.reviveAsync=g.reviveAsync.bind(g)),E[G]=he}l[G]=g}})}),this}}function fe(r,t){return c(t).map(function(a){r[a]=t[a]}),r}function ee(r){return r.replace(/~/g,"~0").replace(/\./g,"~1")}function W(r){return r.replace(/~1/g,".").replace(/~0/g,"~")}function D(r,t){if(t==="")return r;var a=t.indexOf(".");if(a>-1){var E=r[W(t.substr(0,a))];return E===void 0?void 0:D(E,t.substr(a+1))}return r[W(t)]}function pe(){}function R(r){this.p=new Promise(r)}R.prototype.then=function(r,t){var a=this;return new R(function(E,l){a.p.then(function(y){E(r?r(y):y)},function(y){a.p.catch(function(S){return t?t(S):Promise.reject(S)}).then(E,l)})})},R.prototype.catch=function(r){return this.then(null,r)},R.resolve=function(r){return new R(function(t){t(r)})},R.reject=function(r){return new R(function(t,a){a(r)})},["all","race"].map(function(r){R[r]=function(t){return new R(function(a,E){Promise[r](t.map(function(l){return l.p})).then(a,E)})}}),w.Undefined=pe,w.Promise=R,w.isThenable=_e,w.toStringTag=se,w.hasConstructorOf=F,w.isObject=Q,w.isPlainObject=$,w.isUserObject=function r(t){if(!t||se(t)!=="Object")return!1;var a=U(t);return!a||F(t,Object)||r(a)},w.escapeKeyPathComponent=ee,w.unescapeKeyPathComponent=W,w.getByKeyPath=D,w.getJSONType=function(r){return r===null?"null":i(r)?"array":r===void 0?"undefined":s(r)},w.JSON_TYPES=["null","boolean","number","string","array","object"];for(var b={userObject:{test:function(t,a){return w.isUserObject(t)},replace:function(t){return Object.assign({},t)},revive:function(t){return t}}},n=[[{sparseArrays:{testPlainObjects:!0,test:function(t){return Array.isArray(t)},replace:function(t,a){return a.iterateUnsetNumeric=!0,t}}},{sparseUndefined:{test:function(t,a){return t===void 0&&a.ownKeys===!1},replace:function(t){return null},revive:function(t){}}}],{undef:{test:function(t,a){return t===void 0&&(a.ownKeys||!("ownKeys"in a))},replace:function(t){return null},revive:function(t){return new w.Undefined}}}],e={StringObject:{test:function(t){return w.toStringTag(t)==="String"&&(t===void 0?"undefined":s(t))==="object"},replace:function(t){return String(t)},revive:function(t){return new String(t)}},BooleanObject:{test:function(t){return w.toStringTag(t)==="Boolean"&&(t===void 0?"undefined":s(t))==="object"},replace:function(t){return!!t},revive:function(t){return new Boolean(t)}},NumberObject:{test:function(t){return w.toStringTag(t)==="Number"&&(t===void 0?"undefined":s(t))==="object"},replace:function(t){return Number(t)},revive:function(t){return new Number(t)}}},v=[{nan:{test:function(t){return typeof t=="number"&&isNaN(t)},replace:function(t){return"NaN"},revive:function(t){return NaN}}},{infinity:{test:function(t){return t===1/0},replace:function(t){return"Infinity"},revive:function(t){return 1/0}}},{negativeInfinity:{test:function(t){return t===-1/0},replace:function(t){return"-Infinity"},revive:function(t){return-1/0}}}],u={date:{test:function(t){return w.toStringTag(t)==="Date"},replace:function(t){var a=t.getTime();return isNaN(a)?"NaN":a},revive:function(t){return t==="NaN"?new Date(NaN):new Date(t)}}},H={regexp:{test:function(t){return w.toStringTag(t)==="RegExp"},replace:function(t){return{source:t.source,flags:(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":"")}},revive:function(t){var a=t.source,E=t.flags;return new RegExp(a,E)}}},J={map:{test:function(t){return w.toStringTag(t)==="Map"},replace:function(t){return Array.from(t.entries())},revive:function(t){return new Map(t)}}},ce={set:{test:function(t){return w.toStringTag(t)==="Set"},replace:function(t){return Array.from(t.values())},revive:function(t){return new Set(t)}}},te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P=new Uint8Array(256),_=0;_<te.length;_++)P[te.charCodeAt(_)]=_;var x=function(t,a,E){for(var l=new Uint8Array(t,a,E),y=l.length,S="",O=0;O<y;O+=3)S+=te[l[O]>>2],S+=te[(3&l[O])<<4|l[O+1]>>4],S+=te[(15&l[O+1])<<2|l[O+2]>>6],S+=te[63&l[O+2]];return y%3==2?S=S.substring(0,S.length-1)+"=":y%3==1&&(S=S.substring(0,S.length-2)+"=="),S},M=function(t){var a=t.length,E=.75*t.length,l=0,y=void 0,S=void 0,O=void 0,K=void 0;t[t.length-1]==="="&&(E--,t[t.length-2]==="="&&E--);for(var A=new ArrayBuffer(E),N=new Uint8Array(A),m=0;m<a;m+=4)y=P[t.charCodeAt(m)],S=P[t.charCodeAt(m+1)],O=P[t.charCodeAt(m+2)],K=P[t.charCodeAt(m+3)],N[l++]=y<<2|S>>4,N[l++]=(15&S)<<4|O>>2,N[l++]=(3&O)<<6|63&K;return A},z={arraybuffer:{test:function(t){return w.toStringTag(t)==="ArrayBuffer"},replace:function(t,a){a.buffers||(a.buffers=[]);var E=a.buffers.indexOf(t);return E>-1?{index:E}:(a.buffers.push(t),x(t))},revive:function(t,a){if(a.buffers||(a.buffers=[]),(t===void 0?"undefined":s(t))==="object")return a.buffers[t.index];var E=M(t);return a.buffers.push(E),E}}},B=typeof self>"u"?$e:self,be={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(r){var t=r,a=B[t];a&&(be[r.toLowerCase()]={test:function(l){return w.toStringTag(l)===t},replace:function(l,y){var S=l.buffer,O=l.byteOffset,K=l.length;y.buffers||(y.buffers=[]);var A=y.buffers.indexOf(S);return A>-1?{index:A,byteOffset:O,length:K}:(y.buffers.push(S),{encoded:x(S),byteOffset:O,length:K})},revive:function(l,y){y.buffers||(y.buffers=[]);var S=l.byteOffset,O=l.length,K=l.encoded,A=l.index,N=void 0;return"index"in l?N=y.buffers[A]:(N=M(K),y.buffers.push(N)),new a(N,S,O)}})});var ne={dataview:{test:function(t){return w.toStringTag(t)==="DataView"},replace:function(t,a){var E=t.buffer,l=t.byteOffset,y=t.byteLength;a.buffers||(a.buffers=[]);var S=a.buffers.indexOf(E);return S>-1?{index:S,byteOffset:l,byteLength:y}:(a.buffers.push(E),{encoded:x(E),byteOffset:l,byteLength:y})},revive:function(t,a){a.buffers||(a.buffers=[]);var E=t.byteOffset,l=t.byteLength,y=t.encoded,S=t.index,O=void 0;return"index"in t?O=a.buffers[S]:(O=M(y),a.buffers.push(O)),new DataView(O,E,l)}}},ye={IntlCollator:{test:function(t){return w.hasConstructorOf(t,Intl.Collator)},replace:function(t){return t.resolvedOptions()},revive:function(t){return new Intl.Collator(t.locale,t)}},IntlDateTimeFormat:{test:function(t){return w.hasConstructorOf(t,Intl.DateTimeFormat)},replace:function(t){return t.resolvedOptions()},revive:function(t){return new Intl.DateTimeFormat(t.locale,t)}},IntlNumberFormat:{test:function(t){return w.hasConstructorOf(t,Intl.NumberFormat)},replace:function(t){return t.resolvedOptions()},revive:function(t){return new Intl.NumberFormat(t.locale,t)}}};function re(r){for(var t=new Uint16Array(r.length),a=0;a<r.length;a++)t[a]=r.charCodeAt(a);return t.buffer}var ie={file:{test:function(t){return w.toStringTag(t)==="File"},replace:function(t){var a=new XMLHttpRequest;if(a.open("GET",URL.createObjectURL(t),!1),typeof TextEncoder<"u"&&a.overrideMimeType("text/plain; charset=utf-16le"),a.status!==200&&a.status!==0)throw new Error("Bad Blob access: "+a.status);return a.send(),{type:t.type,stringContents:a.responseText,name:t.name,lastModified:t.lastModified}},revive:function(t){var a=t.name,E=t.type,l=t.stringContents,y=t.lastModified,S=re(l);return new File([S],a,{type:E,lastModified:y})},replaceAsync:function(t){return new w.Promise(function(a,E){if(t.isClosed)E(new Error("The File is closed"));else{var l=new FileReader;l.addEventListener("load",function(){a({type:t.type,stringContents:l.result,name:t.name,lastModified:t.lastModified})}),l.addEventListener("error",function(){E(l.error)}),l.readAsText(t,"UTF-16")}})}}};return[b,n,e,v,u,H,{imagedata:{test:function(t){return w.toStringTag(t)==="ImageData"},replace:function(t){return{array:Array.from(t.data),width:t.width,height:t.height}},revive:function(t){return new ImageData(new Uint8ClampedArray(t.array),t.width,t.height)}}},{imagebitmap:{test:function(t){return w.toStringTag(t)==="ImageBitmap"||t&&t.dataset&&t.dataset.toStringTag==="ImageBitmap"},replace:function(t){var a=document.createElement("canvas");return a.getContext("2d").drawImage(t,0,0),a.toDataURL()},revive:function(t){var a=document.createElement("canvas"),E=a.getContext("2d"),l=document.createElement("img");return l.onload=function(){E.drawImage(l,0,0)},l.src=t,a},reviveAsync:function(t){var a=document.createElement("canvas"),E=a.getContext("2d"),l=document.createElement("img");return l.onload=function(){E.drawImage(l,0,0)},l.src=t,createImageBitmap(a)}}},ie,{file:ie.file,filelist:{test:function(t){return w.toStringTag(t)==="FileList"},replace:function(t){for(var a=[],E=0;E<t.length;E++)a[E]=t.item(E);return a},revive:function(t){function a(){this._files=arguments[0],this.length=this._files.length}return a.prototype.item=function(E){return this._files[E]},a.prototype[Symbol.toStringTag]="FileList",new a(t)}}},{blob:{test:function(t){return w.toStringTag(t)==="Blob"},replace:function(t){var a=new XMLHttpRequest;if(a.open("GET",URL.createObjectURL(t),!1),typeof TextEncoder<"u"&&a.overrideMimeType("text/plain; charset=utf-16le"),a.status!==200&&a.status!==0)throw new Error("Bad Blob access: "+a.status);return a.send(),{type:t.type,stringContents:a.responseText}},revive:function(t){var a=t.type,E=t.stringContents;return new Blob([re(E)],{type:a})},replaceAsync:function(t){return new w.Promise(function(a,E){if(t.isClosed)E(new Error("The Blob is closed"));else{var l=new FileReader;l.addEventListener("load",function(){a({type:t.type,stringContents:l.result})}),l.addEventListener("error",function(){E(l.error)}),l.readAsText(t,"UTF-16")}})}}}].concat(typeof Map=="function"?J:[],typeof Set=="function"?ce:[],typeof ArrayBuffer=="function"?z:[],typeof Uint8Array=="function"?be:[],typeof DataView=="function"?ne:[],typeof Intl<"u"?ye:[])})}),ke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ve=new Uint8Array(256);for(var Me=0;Me<ke.length;Me++)Ve[ke.charCodeAt(Me)]=Me;var Xe=function(f,s,p){p==null&&(p=f.byteLength);for(var h=new Uint8Array(f,s||0,p),c=h.length,i="",I=0;I<c;I+=3)i+=ke[h[I]>>2],i+=ke[(h[I]&3)<<4|h[I+1]>>4],i+=ke[(h[I+1]&15)<<2|h[I+2]>>6],i+=ke[h[I+2]&63];return c%3===2?i=i.substring(0,i.length-1)+"=":c%3===1&&(i=i.substring(0,i.length-2)+"=="),i},Qe=function(f){var s=f.length,p=f.length*.75,h=0,c,i,I,U;f[f.length-1]==="="&&(p--,f[f.length-2]==="="&&p--);for(var o=new ArrayBuffer(p),C=new Uint8Array(o),q=0;q<s;q+=4)c=Ve[f.charCodeAt(q)],i=Ve[f.charCodeAt(q+1)],I=Ve[f.charCodeAt(q+2)],U=Ve[f.charCodeAt(q+3)],C[h++]=c<<2|i>>4,C[h++]=(i&15)<<4|I>>2,C[h++]=(I&3)<<6|U&63;return o},lt=typeof self>"u"?global:self,Ze={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(d){var f=d,s=lt[f];s&&(Ze[d.toLowerCase()+"2"]={test:function(p){return Ke.toStringTag(p)===f},replace:function(p){var h=p.buffer,c=p.byteOffset,i=p.length;return{buffer:h,byteOffset:c,length:i}},revive:function(p){var h=p.buffer,c=p.byteOffset,i=p.length;return new s(h,c,i)}})});var ft={arraybuffer:{test:function(d){return Ke.toStringTag(d)==="ArrayBuffer"},replace:function(d){return Xe(d,0,d.byteLength)},revive:function(d){var f=Qe(d);return f}}},Ne=new Ke().register(ct),pt="FileReaderSync"in self,Ge=[],Ye=0;Ne.register([ft,Ze,{blob2:{test:function(d){return Ke.toStringTag(d)==="Blob"},replace:function(d){if(d.isClosed)throw new Error("The Blob is closed");if(pt){var f=We(d,"binary"),s=Xe(f,0,f.byteLength);return{type:d.type,data:s}}else{Ge.push(d);var p={type:d.type,data:{start:Ye,end:Ye+d.size}};return console.log("b.size: "+d.size),Ye+=d.size,p}},finalize:function(d,f){d.data=Xe(f,0,f.byteLength)},revive:function(d){var f=d.type,s=d.data;return new Blob([Qe(s)],{type:f})}}}]);Ne.mustFinalize=function(){return Ge.length>0};Ne.finalize=function(d){return Re(void 0,void 0,void 0,function(){var f,s,p,h,c,i,I,U,o,C;return Ue(this,function(q){switch(q.label){case 0:return[4,ze(new Blob(Ge),"binary")];case 1:if(f=q.sent(),d){for(s=0,p=d;s<p.length;s++)if(h=p[s],h.$types){c=h.$types,i=c.$,i&&(c=c.$);for(I in c)U=c[I],o=Ne.types[U],o&&o.finalize&&(C=Oe.getByKeyPath(h,i?"$."+I:I),o.finalize(C,f.slice(C.start,C.end)))}}return Ge=[],[2]}})})};var dt=2e3;function yt(d,f){return Re(this,void 0,void 0,function(){function s(){return Re(this,void 0,void 0,function(){var o,C,q,_e,se,F,$,Q,w;return Ue(this,function(fe){switch(fe.label){case 0:return[4,Promise.all(d.tables.map(function(ee){return ee.count()}))];case 1:o=fe.sent(),o.forEach(function(ee,W){return h[W].rowCount=ee}),U.totalRows=o.reduce(function(ee,W){return ee+W}),C=JSON.stringify(i,void 0,c?2:void 0),q=C.lastIndexOf("]"),_e=C.substring(0,q),p.push(_e),se=f.filter,F=function(ee){var W,D,pe,R,b,n,e,v,u,H,J,ce;return Ue(this,function(te){switch(te.label){case 0:W=d.table(ee),D=W.schema.primKey,pe=!!D.keyPath,R=f.numRowsPerChunk||dt,b=pe?{tableName:W.name,inbound:!0,rows:[]}:{tableName:W.name,inbound:!1,rows:[]},n=JSON.stringify(b,void 0,c?2:void 0),c&&(n=n.split(`
`).join(`
    `)),e=n.lastIndexOf("]"),p.push(n.substring(0,e)),v=null,u=0,H=!0,J=function(){var P,_,x,M,ne,z,B,be,ne;return Ue(this,function(ye){switch(ye.label){case 0:return I&&Oe.ignoreTransaction(function(){return I(U)}),P=v==null?W.limit(R):W.where(":id").above(v).limit(R),[4,P.toArray()];case 1:return _=ye.sent(),_.length===0?[2,"break"]:(v!=null&&u>0&&(p.push(","),c&&p.push(`
      `)),H=_.length===R,pe?(x=se?_.filter(function(re){return se(ee,re)}):_,M=x.map(function(re){return Ne.encapsulate(re)}),Ne.mustFinalize()?[4,Oe.waitFor(Ne.finalize(M))]:[3,3]):[3,4]);case 2:ye.sent(),ye.label=3;case 3:return ne=JSON.stringify(M,void 0,c?2:void 0),c&&(ne=ne.split(`
`).join(`
      `)),p.push(new Blob([ne.substring(1,ne.length-1)])),u=x.length,v=_.length>0?Oe.getByKeyPath(_[_.length-1],D.keyPath):null,[3,8];case 4:return[4,P.primaryKeys()];case 5:return z=ye.sent(),B=z.map(function(re,ie){return[re,_[ie]]}),se&&(B=B.filter(function(re){var ie=re[0],r=re[1];return se(ee,r,ie)})),be=B.map(function(re){return Ne.encapsulate(re)}),Ne.mustFinalize()?[4,Oe.waitFor(Ne.finalize(be))]:[3,7];case 6:ye.sent(),ye.label=7;case 7:ne=JSON.stringify(be,void 0,c?2:void 0),c&&(ne=ne.split(`
`).join(`
      `)),p.push(new Blob([ne.substring(1,ne.length-1)])),u=B.length,v=z.length>0?z[z.length-1]:null,ye.label=8;case 8:return U.completedRows+=_.length,[2]}})},te.label=1;case 1:return H?[5,J()]:[3,3];case 2:return ce=te.sent(),ce==="break"?[3,3]:[3,1];case 3:return p.push(n.substr(e)),U.completedTables+=1,U.completedTables<U.totalTables&&p.push(","),[2]}})},$=0,Q=h,fe.label=2;case 2:return $<Q.length?(w=Q[$].name,[5,F(w)]):[3,5];case 3:fe.sent(),fe.label=4;case 4:return $++,[3,2];case 5:return p.push(C.substr(q)),U.done=!0,I&&Oe.ignoreTransaction(function(){return I(U)}),[2]}})})}var p,h,c,i,I,U;return Ue(this,function(o){switch(o.label){case 0:f=f||{},p=[],h=d.tables.map(function(C){return{name:C.name,schema:st(C),rowCount:0}}),c=f.prettyJson,i={formatName:"dexie",formatVersion:1,data:{databaseName:d.name,databaseVersion:d.verno,tables:h,data:[]}},I=f.progressCallback,U={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:d.tables.length},o.label=1;case 1:return o.trys.push([1,,6,7]),f.noTransaction?[4,s()]:[3,3];case 2:return o.sent(),[3,5];case 3:return[4,d.transaction("r",d.tables,s)];case 4:o.sent(),o.label=5;case 5:return[3,7];case 6:return Ne.finalize(),[7];case 7:return I&&Oe.ignoreTransaction(function(){return I(U)}),[2,new Blob(p,{type:"text/json"})]}})})}var vt=1,bt={Stream:function(){}},ht=qe(function(d,f){(function(s){var p=typeof process=="object"&&{NVM_RC_VERSION:"",_VOLTA_TOOL_RECURSION:"1",MANPATH:"/opt/homebrew/share/man:/usr/share/man:/usr/local/share/man:/opt/homebrew/share/man::",TERM_PROGRAM:"vscode",NODE:"/Users/aptea/.volta/tools/image/node/20.2.0/bin/node",NVM_CD_FLAGS:"-q",INIT_CWD:"/Users/aptea/dev/aggr",TERM:"xterm-256color",SHELL:"/bin/zsh",TMPDIR:"/var/folders/dy/n9hvngt16yb_tj75ybsrjrym0000gn/T/",HOMEBREW_REPOSITORY:"/opt/homebrew",npm_config_metrics_registry:"https://registry.npmjs.org/",npm_config_global_prefix:"/Users/aptea/.volta/tools/image/node/20.2.0",TERM_PROGRAM_VERSION:"1.86.2",ZDOTDIR:"/Users/aptea",VOLTA_HOME:"/Users/aptea/.volta",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"0",npm_config_noproxy:"",npm_config_local_prefix:"/Users/aptea/dev/aggr",USER:"aptea",NVM_DIR:"/Users/aptea/.nvm",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/Users/aptea/.volta/tools/image/node/20.2.0/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.BpUJfwQGFE/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/Users/aptea/.volta/tools/image/node/20.2.0/lib/node_modules/npm/bin/npm-cli.js",PATH:"/Users/aptea/dev/aggr/node_modules/.bin:/Users/aptea/dev/node_modules/.bin:/Users/aptea/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/aptea/.volta/tools/image/node/20.2.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/aptea/dev/aggr/node_modules/.bin:/Users/aptea/dev/node_modules/.bin:/Users/aptea/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/aptea/.volta/tools/image/node/20.2.0/bin:/Users/aptea/dev/aggr/node_modules/.bin:/Users/aptea/dev/node_modules/.bin:/Users/aptea/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/aptea/.volta/tools/image/npm/9.7.1/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/aptea/.volta/tools/image/npm/9.7.1/bin:/Users/aptea/.volta/tools/image/node/20.2.0/bin:/Users/aptea/.volta/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Library/Frameworks/Python.framework/Versions/3.11/bin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Users/aptea/.volta/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Library/Frameworks/Python.framework/Versions/3.11/bin",_:"/Users/aptea/dev/aggr/node_modules/.bin/vite",npm_package_json:"/Users/aptea/dev/aggr/package.json",__CFBundleIdentifier:"com.microsoft.VSCode",USER_ZDOTDIR:"/Users/aptea",npm_config_auto_install_peers:"true",npm_config_init_module:"/Users/aptea/.npm-init.js",npm_config_userconfig:"/Users/aptea/.npmrc",PWD:"/Users/aptea/dev/aggr",npm_command:"run-script",EDITOR:"vi",npm_lifecycle_event:"build",LANG:"en_US.UTF-8",npm_package_name:"aggr",XPC_FLAGS:"0x0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",npm_config_node_gyp:"/Users/aptea/.volta/tools/image/node/20.2.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",XPC_SERVICE_NAME:"0",npm_package_version:"3.5.0",VSCODE_INJECTION:"1",SHLVL:"4",HOME:"/Users/aptea",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",LOGNAME:"aptea",npm_config_cache:"/Users/aptea/.npm",npm_lifecycle_script:"vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/dy/n9hvngt16yb_tj75ybsrjrym0000gn/T/vscode-git-5f37e17c5e.sock",npm_config_user_agent:"npm/9.7.1 node/v20.2.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",npm_config_puppeteer_skip_download:"true",COLORTERM:"truecolor",npm_config_prefix:"/Users/aptea/.volta/tools/image/node/20.2.0",npm_node_execpath:"/Users/aptea/.volta/tools/image/node/20.2.0/bin/node",NODE_ENV:"production",VITE_APP_VERSION:"3.5.0",VITE_APP_BUILD_DATE:"20 feb",VITE_APP_EXCHANGES:"aggr,binance,binance_futures,binance_us,bitfinex,bitget,bitmart,bitmex,bitstamp,bybit,coinbase,cryptocom,deribit,dydx,gateio,hitbtc,huobi,kraken,kucoin,mexc,okex,phemex,poloniex,uniswap",VITE_APP_API_URL:"https://api.aggr.trade/",VITE_APP_PROXY_URL:"https://cors.aggr.trade/",VITE_APP_LIB_URL:"https://lib.aggr.trade/",VITE_APP_LIB_REPO_URL:"https://github.com/Tucsky/aggr-lib",VITE_APP_API_SUPPORTED_TIMEFRAMES:"5,10,15,30,60,180,300,900,1260,1800,3600,7200,14400,21600,28800,43200,86400",VITE_APP_BASE_PATH:"/aggr/",VITE_APP_PUBLIC_VAPID_KEY:"BNi_5_w2FU8LdTg5KxQvHYi0hXzyKMIYmYXin1nUyXEtXfyAAef0pe68v3hrQwDP00NPGPasGTrurB8Hmi3On7I"}?{NVM_RC_VERSION:"",_VOLTA_TOOL_RECURSION:"1",MANPATH:"/opt/homebrew/share/man:/usr/share/man:/usr/local/share/man:/opt/homebrew/share/man::",TERM_PROGRAM:"vscode",NODE:"/Users/aptea/.volta/tools/image/node/20.2.0/bin/node",NVM_CD_FLAGS:"-q",INIT_CWD:"/Users/aptea/dev/aggr",TERM:"xterm-256color",SHELL:"/bin/zsh",TMPDIR:"/var/folders/dy/n9hvngt16yb_tj75ybsrjrym0000gn/T/",HOMEBREW_REPOSITORY:"/opt/homebrew",npm_config_metrics_registry:"https://registry.npmjs.org/",npm_config_global_prefix:"/Users/aptea/.volta/tools/image/node/20.2.0",TERM_PROGRAM_VERSION:"1.86.2",ZDOTDIR:"/Users/aptea",VOLTA_HOME:"/Users/aptea/.volta",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"0",npm_config_noproxy:"",npm_config_local_prefix:"/Users/aptea/dev/aggr",USER:"aptea",NVM_DIR:"/Users/aptea/.nvm",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/Users/aptea/.volta/tools/image/node/20.2.0/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.BpUJfwQGFE/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/Users/aptea/.volta/tools/image/node/20.2.0/lib/node_modules/npm/bin/npm-cli.js",PATH:"/Users/aptea/dev/aggr/node_modules/.bin:/Users/aptea/dev/node_modules/.bin:/Users/aptea/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/aptea/.volta/tools/image/node/20.2.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/aptea/dev/aggr/node_modules/.bin:/Users/aptea/dev/node_modules/.bin:/Users/aptea/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/aptea/.volta/tools/image/node/20.2.0/bin:/Users/aptea/dev/aggr/node_modules/.bin:/Users/aptea/dev/node_modules/.bin:/Users/aptea/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/aptea/.volta/tools/image/npm/9.7.1/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/aptea/.volta/tools/image/npm/9.7.1/bin:/Users/aptea/.volta/tools/image/node/20.2.0/bin:/Users/aptea/.volta/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Library/Frameworks/Python.framework/Versions/3.11/bin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Users/aptea/.volta/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/Library/Frameworks/Python.framework/Versions/3.11/bin",_:"/Users/aptea/dev/aggr/node_modules/.bin/vite",npm_package_json:"/Users/aptea/dev/aggr/package.json",__CFBundleIdentifier:"com.microsoft.VSCode",USER_ZDOTDIR:"/Users/aptea",npm_config_auto_install_peers:"true",npm_config_init_module:"/Users/aptea/.npm-init.js",npm_config_userconfig:"/Users/aptea/.npmrc",PWD:"/Users/aptea/dev/aggr",npm_command:"run-script",EDITOR:"vi",npm_lifecycle_event:"build",LANG:"en_US.UTF-8",npm_package_name:"aggr",XPC_FLAGS:"0x0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",npm_config_node_gyp:"/Users/aptea/.volta/tools/image/node/20.2.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",XPC_SERVICE_NAME:"0",npm_package_version:"3.5.0",VSCODE_INJECTION:"1",SHLVL:"4",HOME:"/Users/aptea",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",LOGNAME:"aptea",npm_config_cache:"/Users/aptea/.npm",npm_lifecycle_script:"vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/dy/n9hvngt16yb_tj75ybsrjrym0000gn/T/vscode-git-5f37e17c5e.sock",npm_config_user_agent:"npm/9.7.1 node/v20.2.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",npm_config_puppeteer_skip_download:"true",COLORTERM:"truecolor",npm_config_prefix:"/Users/aptea/.volta/tools/image/node/20.2.0",npm_node_execpath:"/Users/aptea/.volta/tools/image/node/20.2.0/bin/node",NODE_ENV:"production",VITE_APP_VERSION:"3.5.0",VITE_APP_BUILD_DATE:"20 feb",VITE_APP_EXCHANGES:"aggr,binance,binance_futures,binance_us,bitfinex,bitget,bitmart,bitmex,bitstamp,bybit,coinbase,cryptocom,deribit,dydx,gateio,hitbtc,huobi,kraken,kucoin,mexc,okex,phemex,poloniex,uniswap",VITE_APP_API_URL:"https://api.aggr.trade/",VITE_APP_PROXY_URL:"https://cors.aggr.trade/",VITE_APP_LIB_URL:"https://lib.aggr.trade/",VITE_APP_LIB_REPO_URL:"https://github.com/Tucsky/aggr-lib",VITE_APP_API_SUPPORTED_TIMEFRAMES:"5,10,15,30,60,180,300,900,1260,1800,3600,7200,14400,21600,28800,43200,86400",VITE_APP_BASE_PATH:"/aggr/",VITE_APP_PUBLIC_VAPID_KEY:"BNi_5_w2FU8LdTg5KxQvHYi0hXzyKMIYmYXin1nUyXEtXfyAAef0pe68v3hrQwDP00NPGPasGTrurB8Hmi3On7I"}:self;s.parser=function(n){return new se(n)},s.CParser=se,s.CStream=$,s.createStream=F,s.MAX_BUFFER_LENGTH=10*1024*1024,s.DEBUG=p.CDEBUG==="debug",s.INFO=p.CDEBUG==="debug"||p.CDEBUG==="info",s.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var h={textNode:void 0,numberNode:""},c=s.EVENTS.filter(function(n){return n!=="error"&&n!=="end"}),i=0,I;s.STATE={BEGIN:i++,VALUE:i++,OPEN_OBJECT:i++,CLOSE_OBJECT:i++,OPEN_ARRAY:i++,CLOSE_ARRAY:i++,TEXT_ESCAPE:i++,STRING:i++,BACKSLASH:i++,END:i++,OPEN_KEY:i++,CLOSE_KEY:i++,TRUE:i++,TRUE2:i++,TRUE3:i++,FALSE:i++,FALSE2:i++,FALSE3:i++,FALSE4:i++,NULL:i++,NULL2:i++,NULL3:i++,NUMBER_DECIMAL_POINT:i++,NUMBER_DIGIT:i++};for(var U in s.STATE)s.STATE[s.STATE[U]]=U;i=s.STATE;const o={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(n){function e(){this.__proto__=n}return e.prototype=n,new e}),Object.getPrototypeOf||(Object.getPrototypeOf=function(n){return n.__proto__}),Object.keys||(Object.keys=function(n){var e=[];for(var v in n)n.hasOwnProperty(v)&&e.push(v);return e});function C(n){var e=Math.max(s.MAX_BUFFER_LENGTH,10),v=0;for(var u in h){var H=n[u]===void 0?0:n[u].length;if(H>e)switch(u){case"text":closeText(n);break;default:D(n,"Max buffer length exceeded: "+u)}v=Math.max(v,H)}n.bufferCheckPosition=s.MAX_BUFFER_LENGTH-v+n.position}function q(n){for(var e in h)n[e]=h[e]}var _e=/[\\"\n]/g;function se(n){if(!(this instanceof se))return new se(n);var e=this;q(e),e.bufferCheckPosition=s.MAX_BUFFER_LENGTH,e.q=e.c=e.p="",e.opt=n||{},e.closed=e.closedRoot=e.sawRoot=!1,e.tag=e.error=null,e.state=i.BEGIN,e.stack=new Array,e.position=e.column=0,e.line=1,e.slashed=!1,e.unicodeI=0,e.unicodeS=null,e.depth=0,Q(e,"onready")}se.prototype={end:function(){pe(this)},write:b,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{I=bt.Stream}catch{I=function(){}}function F(n){return new $(n)}function $(n){if(!(this instanceof $))return new $(n);this._parser=new se(n),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var e=this;I.apply(e),this._parser.onend=function(){e.emit("end")},this._parser.onerror=function(v){e.emit("error",v),e._parser.error=null},c.forEach(function(v){Object.defineProperty(e,"on"+v,{get:function(){return e._parser["on"+v]},set:function(u){if(!u)return e.removeAllListeners(v),e._parser["on"+v]=u,u;e.on(v,u)},enumerable:!0,configurable:!1})})}$.prototype=Object.create(I.prototype,{constructor:{value:$}}),$.prototype.write=function(n){n=new Buffer(n);for(var e=0;e<n.length;e++){var v=n[e];if(this.bytes_remaining>0){for(var u=0;u<this.bytes_remaining;u++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+u]=n[u];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,e=e+u-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&v>=128)if(v>=194&&v<=223&&(this.bytes_in_sequence=2),v>=224&&v<=239&&(this.bytes_in_sequence=3),v>=240&&v<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+e>n.length){for(var H=0;H<=n.length-1-e;H++)this.temp_buffs[this.bytes_in_sequence][H]=n[e+H];return this.bytes_remaining=e+this.bytes_in_sequence-n.length,!0}else{this.string=n.slice(e,e+this.bytes_in_sequence).toString(),e=e+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var J=e;J<n.length&&!(n[J]>=128);J++);this.string=n.slice(e,J).toString(),this._parser.write(this.string),this.emit("data",this.string),e=J-1}},$.prototype.end=function(n){return n&&n.length&&this._parser.write(n.toString()),this._parser.end(),!0},$.prototype.on=function(n,e){var v=this;return!v._parser["on"+n]&&c.indexOf(n)!==-1&&(v._parser["on"+n]=function(){var u=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);u.splice(0,0,n),v.emit.apply(v,u)}),I.prototype.on.call(v,n,e)},$.prototype.destroy=function(){q(this._parser),this.emit("close")};function Q(n,e,v){s.INFO&&console.log("-- emit",e,v),n[e]&&n[e](v)}function w(n,e,v){fe(n),Q(n,e,v)}function fe(n,e){n.textNode=W(n.opt,n.textNode),n.textNode!==void 0&&Q(n,e||"onvalue",n.textNode),n.textNode=void 0}function ee(n){n.numberNode&&Q(n,"onvalue",parseFloat(n.numberNode)),n.numberNode=""}function W(n,e){return e===void 0||(n.trim&&(e=e.trim()),n.normalize&&(e=e.replace(/\s+/g," "))),e}function D(n,e){return fe(n),e+=`
Line: `+n.line+`
Column: `+n.column+`
Char: `+n.c,e=new Error(e),n.error=e,Q(n,"onerror",e),n}function pe(n){return(n.state!==i.VALUE||n.depth!==0)&&D(n,"Unexpected end"),fe(n),n.c="",n.closed=!0,Q(n,"onend"),se.call(n,n.opt),n}function R(n){return n===o.carriageReturn||n===o.lineFeed||n===o.space||n===o.tab}function b(n){var e=this;if(this.error)throw this.error;if(e.closed)return D(e,"Cannot write after close. Assign an onready handler.");if(n===null)return pe(e);var v=0,u=n.charCodeAt(0),H=e.p;for(s.DEBUG&&console.log("write -> ["+n+"]");u&&(H=u,e.c=u=n.charCodeAt(v++),H!==u?e.p=H:H=e.p,!!u);)switch(s.DEBUG&&console.log(v,u,s.STATE[e.state]),e.position++,u===o.lineFeed?(e.line++,e.column=0):e.column++,e.state){case i.BEGIN:u===o.openBrace?e.state=i.OPEN_OBJECT:u===o.openBracket?e.state=i.OPEN_ARRAY:R(u)||D(e,"Non-whitespace before {[.");continue;case i.OPEN_KEY:case i.OPEN_OBJECT:if(R(u))continue;if(e.state===i.OPEN_KEY)e.stack.push(i.CLOSE_KEY);else if(u===o.closeBrace){Q(e,"onopenobject"),this.depth++,Q(e,"oncloseobject"),this.depth--,e.state=e.stack.pop()||i.VALUE;continue}else e.stack.push(i.CLOSE_OBJECT);u===o.doubleQuote?e.state=i.STRING:D(e,'Malformed object key should start with "');continue;case i.CLOSE_KEY:case i.CLOSE_OBJECT:if(R(u))continue;e.state,i.CLOSE_KEY,u===o.colon?(e.state===i.CLOSE_OBJECT?(e.stack.push(i.CLOSE_OBJECT),fe(e,"onopenobject"),this.depth++):fe(e,"onkey"),e.state=i.VALUE):u===o.closeBrace?(w(e,"oncloseobject"),this.depth--,e.state=e.stack.pop()||i.VALUE):u===o.comma?(e.state===i.CLOSE_OBJECT&&e.stack.push(i.CLOSE_OBJECT),fe(e),e.state=i.OPEN_KEY):D(e,"Bad object");continue;case i.OPEN_ARRAY:case i.VALUE:if(R(u))continue;if(e.state===i.OPEN_ARRAY)if(Q(e,"onopenarray"),this.depth++,e.state=i.VALUE,u===o.closeBracket){Q(e,"onclosearray"),this.depth--,e.state=e.stack.pop()||i.VALUE;continue}else e.stack.push(i.CLOSE_ARRAY);u===o.doubleQuote?e.state=i.STRING:u===o.openBrace?e.state=i.OPEN_OBJECT:u===o.openBracket?e.state=i.OPEN_ARRAY:u===o.t?e.state=i.TRUE:u===o.f?e.state=i.FALSE:u===o.n?e.state=i.NULL:u===o.minus?e.numberNode+="-":o._0<=u&&u<=o._9?(e.numberNode+=String.fromCharCode(u),e.state=i.NUMBER_DIGIT):D(e,"Bad value");continue;case i.CLOSE_ARRAY:if(u===o.comma)e.stack.push(i.CLOSE_ARRAY),fe(e,"onvalue"),e.state=i.VALUE;else if(u===o.closeBracket)w(e,"onclosearray"),this.depth--,e.state=e.stack.pop()||i.VALUE;else{if(R(u))continue;D(e,"Bad array")}continue;case i.STRING:e.textNode===void 0&&(e.textNode="");var J=v-1,ce=e.slashed,te=e.unicodeI;e:for(;;){for(s.DEBUG&&console.log(v,u,s.STATE[e.state],ce);te>0;)if(e.unicodeS+=String.fromCharCode(u),u=n.charCodeAt(v++),e.position++,te===4?(e.textNode+=String.fromCharCode(parseInt(e.unicodeS,16)),te=0,J=v-1):te++,!u)break e;if(u===o.doubleQuote&&!ce){e.state=e.stack.pop()||i.VALUE,e.textNode+=n.substring(J,v-1),e.position+=v-1-J;break}if(u===o.backslash&&!ce&&(ce=!0,e.textNode+=n.substring(J,v-1),e.position+=v-1-J,u=n.charCodeAt(v++),e.position++,!u))break;if(ce){if(ce=!1,u===o.n?e.textNode+=`
`:u===o.r?e.textNode+="\r":u===o.t?e.textNode+="	":u===o.f?e.textNode+="\f":u===o.b?e.textNode+="\b":u===o.u?(te=1,e.unicodeS=""):e.textNode+=String.fromCharCode(u),u=n.charCodeAt(v++),e.position++,J=v-1,u)continue;break}_e.lastIndex=v;var P=_e.exec(n);if(P===null){v=n.length+1,e.textNode+=n.substring(J,v-1),e.position+=v-1-J;break}if(v=P.index+1,u=n.charCodeAt(P.index),!u){e.textNode+=n.substring(J,v-1),e.position+=v-1-J;break}}e.slashed=ce,e.unicodeI=te;continue;case i.TRUE:u===o.r?e.state=i.TRUE2:D(e,"Invalid true started with t"+u);continue;case i.TRUE2:u===o.u?e.state=i.TRUE3:D(e,"Invalid true started with tr"+u);continue;case i.TRUE3:u===o.e?(Q(e,"onvalue",!0),e.state=e.stack.pop()||i.VALUE):D(e,"Invalid true started with tru"+u);continue;case i.FALSE:u===o.a?e.state=i.FALSE2:D(e,"Invalid false started with f"+u);continue;case i.FALSE2:u===o.l?e.state=i.FALSE3:D(e,"Invalid false started with fa"+u);continue;case i.FALSE3:u===o.s?e.state=i.FALSE4:D(e,"Invalid false started with fal"+u);continue;case i.FALSE4:u===o.e?(Q(e,"onvalue",!1),e.state=e.stack.pop()||i.VALUE):D(e,"Invalid false started with fals"+u);continue;case i.NULL:u===o.u?e.state=i.NULL2:D(e,"Invalid null started with n"+u);continue;case i.NULL2:u===o.l?e.state=i.NULL3:D(e,"Invalid null started with nu"+u);continue;case i.NULL3:u===o.l?(Q(e,"onvalue",null),e.state=e.stack.pop()||i.VALUE):D(e,"Invalid null started with nul"+u);continue;case i.NUMBER_DECIMAL_POINT:u===o.period?(e.numberNode+=".",e.state=i.NUMBER_DIGIT):D(e,"Leading zero not followed by .");continue;case i.NUMBER_DIGIT:o._0<=u&&u<=o._9?e.numberNode+=String.fromCharCode(u):u===o.period?(e.numberNode.indexOf(".")!==-1&&D(e,"Invalid number has two dots"),e.numberNode+="."):u===o.e||u===o.E?((e.numberNode.indexOf("e")!==-1||e.numberNode.indexOf("E")!==-1)&&D(e,"Invalid number has two exponential"),e.numberNode+="e"):u===o.plus||u===o.minus?(H===o.e||H===o.E||D(e,"Invalid symbol in number"),e.numberNode+=String.fromCharCode(u)):(ee(e),v--,e.state=e.stack.pop()||i.VALUE);continue;default:D(e,"Unknown state: "+e.state)}return e.position>=e.bufferCheckPosition&&C(e),e}})(f)});function et(d){var f=0,s=mt(!0),p={pullAsync:function(h){return Re(this,void 0,void 0,function(){var c,i,I;return Ue(this,function(U){switch(U.label){case 0:return c=d.slice(f,f+h),f+=h,[4,ze(c,"text")];case 1:return i=U.sent(),I=s.write(i),p.result=I||{},[2,I]}})})},pullSync:function(h){var c=d.slice(f,f+h);f+=h;var i=We(c,"text"),I=s.write(i);return p.result=I||{},I},done:function(){return s.done()},eof:function(){return f>=d.size},result:{}};return p}function mt(d){var f=ht.parser(),s=0,p,h=[],c,i,I=!1,U=!1;return f.onopenobject=function(o){var C={};C.incomplete=!0,p||(p=C),c&&(h.push([i,c,U]),d&&(U?c.push(C):c[i]=C)),c=C,i=o,U=!1,++s},f.onkey=function(o){return i=o},f.onvalue=function(o){return U?c.push(o):c[i]=o},f.oncloseobject=function(){var o;if(delete c.incomplete,i=null,--s===0)I=!0;else{var C=c;o=h.pop(),i=o[0],c=o[1],U=o[2],d||(U?c.push(C):c[i]=C)}},f.onopenarray=function(){var o=[];o.incomplete=!0,p||(p=o),c&&(h.push([i,c,U]),d&&(U?c.push(o):c[i]=o)),c=o,U=!0,i=null,++s},f.onclosearray=function(){var o;if(delete c.incomplete,i=null,--s===0)I=!0;else{var C=c;o=h.pop(),i=o[0],c=o[1],U=o[2],d||(U?c.push(C):c[i]=C)}},{write:function(o){return f.write(o),p},done:function(){return I}}}var tt=1024;function gt(d,f){return Re(this,void 0,void 0,function(){var s,p,h,c;return Ue(this,function(i){switch(i.label){case 0:return f=f||{},s=f.chunkSizeBytes||tt*1024,[4,rt(d,s)];case 1:return p=i.sent(),h=p.result.data,c=new Oe(h.databaseName),c.version(h.databaseVersion).stores(ut(h)),[4,nt(c,p,f)];case 2:return i.sent(),[2,c]}})})}function wt(d){return Re(this,void 0,void 0,function(){var f;return Ue(this,function(s){switch(s.label){case 0:f=et(d),s.label=1;case 1:return f.eof()?[3,3]:[4,f.pullAsync(5*1024)];case 2:return s.sent(),f.result.data&&f.result.data.data?(delete f.result.data.data,[3,3]):[3,1];case 3:return[2,f.result]}})})}function nt(d,f,s){return Re(this,void 0,void 0,function(){function p(){return Re(this,void 0,void 0,function(){var F,$,Q,w,fe;return Ue(this,function(ee){switch(ee.label){case 0:F=function(W){var D,pe,R,b,n,e,v,u,H,J,ce,te;return Ue(this,function(P){switch(P.label){case 0:if(!W.rows)return[2,"break"];if(!W.rows.incomplete&&W.rows.length===0)return[2,"continue"];if(o&&Oe.ignoreTransaction(function(){return o(C)}),D=W.tableName,pe=d.table(D),R=U.tables.filter(function(_){return _.name===D})[0].schema,!pe){if(s.acceptMissingTables)return[2,"continue"];throw new Error("Exported table "+W.tableName+" is missing in installed database")}if(!s.acceptChangedPrimaryKey&&R.split(",")[0]!=pe.schema.primKey.src)throw new Error("Primary key differs for table "+W.tableName+". ");for(b=W.rows,n=[],e=0;e<b.length&&(v=b[e],!v.incomplete);e++)n.push(Ne.revive(v));return u=s.filter,H=u?W.inbound?n.filter(function(_){return u(D,_)}):n.filter(function(_){var x=_[0],M=_[1];return u(D,M,x)}):n,J=W.inbound?[void 0,H]:[H.map(function(_){return _[0]}),n.map(function(_){return _[1]})],ce=J[0],te=J[1],s.overwriteValues?[4,pe.bulkPut(te,ce)]:[3,2];case 1:return P.sent(),[3,4];case 2:return[4,pe.bulkAdd(te,ce)];case 3:P.sent(),P.label=4;case 4:return C.completedRows+=n.length,n.incomplete||(C.completedTables+=1),b.splice(0,n.length),[2]}})},$=0,Q=U.data,ee.label=1;case 1:return $<Q.length?(w=Q[$],[5,F(w)]):[3,4];case 2:if(fe=ee.sent(),fe==="break")return[3,4];ee.label=3;case 3:return $++,[3,1];case 4:for(;U.data.length>0&&U.data[0].rows&&!U.data[0].rows.incomplete;)U.data.splice(0,1);return!c.done()&&!c.eof()?I?(c.pullSync(h),[3,7]):[3,5]:[3,8];case 5:return[4,Oe.waitFor(c.pullAsync(h))];case 6:ee.sent(),ee.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var h,c,i,I,U,o,C,q,_e,se;return Ue(this,function(F){switch(F.label){case 0:return s=s||{},h=s.chunkSizeBytes||tt*1024,[4,rt(f,h)];case 1:if(c=F.sent(),i=c.result,I="FileReaderSync"in self,U=i.data,!s.acceptNameDiff&&d.name!==U.databaseName)throw new Error("Name differs. Current database name is "+d.name+" but export is "+U.databaseName);if(!s.acceptVersionDiff&&d.verno!==U.databaseVersion)throw new Error("Database version differs. Current database is in version "+d.verno+" but export is "+U.databaseVersion);if(o=s.progressCallback,C={done:!1,completedRows:0,completedTables:0,totalRows:U.tables.reduce(function($,Q){return $+Q.rowCount},0),totalTables:U.tables.length},o&&Oe.ignoreTransaction(function(){return o(C)}),!s.clearTablesBeforeImport)return[3,5];q=0,_e=d.tables,F.label=2;case 2:return q<_e.length?(se=_e[q],[4,se.clear()]):[3,5];case 3:F.sent(),F.label=4;case 4:return q++,[3,2];case 5:return s.noTransaction?[4,p()]:[3,7];case 6:return F.sent(),[3,9];case 7:return[4,d.transaction("rw",d.tables,p)];case 8:F.sent(),F.label=9;case 9:return C.done=!0,o&&Oe.ignoreTransaction(function(){return o(C)}),[2]}})})}function rt(d,f){return Re(this,void 0,void 0,function(){var s,p;return Ue(this,function(h){switch(h.label){case 0:s="slice"in d?et(d):d,h.label=1;case 1:return s.eof()?[3,3]:[4,s.pullAsync(f)];case 2:return h.sent(),s.result.data&&s.result.data.data?[3,3]:[3,1];case 3:if(p=s.result,!p||p.formatName!="dexie")throw new Error("Given file is not a dexie export");if(p.formatVersion>vt)throw new Error("Format version "+p.formatVersion+" not supported");if(!p.data)throw new Error("No data in export file");if(!p.data.databaseName)throw new Error("Missing databaseName in export file");if(!p.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!p.data.tables)throw new Error("Missing tables in export file");return[2,s]}})})}Oe.prototype.export=function(d){return yt(this,d)};Oe.prototype.import=function(d,f){return nt(this,d,f)};Oe.import=function(d,f){return gt(d,f)};var Et=function(){throw new Error("This addon extends Dexie.prototype globally and does not have be included in Dexie constructor's addons options.")};export{Et as default,yt as exportDB,gt as importDB,nt as importInto,wt as peakImportFile};

import{aq as o,T as r,a1 as l,n as m}from"./index.5c4cb14.js";const u={name:"TimeframeDropdown",components:{TimeframeInput:o,ToggableSection:r},props:{paneId:{type:String,required:!0},value:{type:HTMLButtonElement,default:null}},data:()=>({editing:!1,typeaheadTimeframe:null}),computed:{timeframes(){return this.$store.state.settings.timeframes},favoriteTimeframes(){return this.$store.state.settings.favoriteTimeframes},groups(){const s=["seconds","minutes","hours","ticks","bps","vol"];return this.timeframes.map(t=>{const i=t.value[t.value.length-1];let a;return i==="t"?a=3:i==="b"?a=4:i==="v"?a=5:t.value>=3600?a=2:t.value>=60?a=1:a=0,{...t,weight:a}}).sort((t,i)=>t.weight!==i.weight?t.weight-i.weight:parseFloat(t.value)-parseFloat(i.value)).reduce((t,i)=>{let a=t[t.length-1];return(!a||a.weight<i.weight)&&(a=t[t.push({title:s[i.weight],weight:i.weight,timeframes:[]})-1]),a.timeframes.push(i),t},[])}},methods:{toggleFavoriteTimeframe(n){this.$store.commit("settings/TOGGLE_FAVORITE_TIMEFRAME",n)},addTimeframe(n,e){n&&(this.$store.commit(this.paneId+"/SET_TIMEFRAME",n),e&&!this.timeframes.find(s=>s.value==n)&&(this.$store.commit("settings/ADD_TIMEFRAME",n),this.$store.dispatch("app/showNotice",{title:`Added timeframe ${l(n)} to the list !`})))},removeTimeframe(n){this.$store.commit("settings/REMOVE_TIMEFRAME",n)},toggleEdit(){this.editing=!this.editing},onInput(n){this.typeaheadTimeframe=n}}};var d=function(){var e=this,s=e._self._c;return s("dropdown",{model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[s("div",{staticClass:"timeframe-dropdown"},[s("div",{staticClass:"dropdown-item timeframe-dropdown__header",on:{click:function(t){t.stopPropagation()}}},[s("timeframe-input",{staticClass:"timeframe-dropdown__input",attrs:{placeholder:"ex 1m"},on:{input:e.onInput,submit:e.addTimeframe}}),e.typeaheadTimeframe&&e.typeaheadTimeframe.value?s("div",{staticClass:"text-nowrap text-monospace text-muted"},[e._v(" ~ "+e._s(e.typeaheadTimeframe.label)+" ")]):e._e(),e.typeaheadTimeframe?s("button",{staticClass:"btn -text",attrs:{type:"button"},on:{click:function(t){return e.addTimeframe(e.typeaheadTimeframe.value,!0)}}},[s("i",{staticClass:"icon-save"})]):s("button",{staticClass:"btn -text",attrs:{type:"button"},on:{click:e.toggleEdit}},[s("i",{class:e.editing?"icon-cross":"icon-edit"})])],1),e._l(e.groups,function(t){return s("ToggableSection",{key:t.title,attrs:{id:`timeframe-${t.title}`,title:t.title,small:""}},e._l(t.timeframes,function(i){return s("button",{key:i.value,staticClass:"dropdown-item dropdown-item--space-between timeframe-option",attrs:{type:"button"},on:{click:function(a){return e.$store.dispatch(`${e.paneId}/setTimeframe`,i.value)}}},[s("span",[e._v(e._s(i.label))]),e.editing?s("i",{staticClass:"icon-trash",on:{click:function(a){return a.stopPropagation(),e.removeTimeframe(i.value)}}}):s("i",{class:[e.favoriteTimeframes[i.value]&&"icon-star-filled",!e.favoriteTimeframes[i.value]&&"icon-star"],on:{click:function(a){return a.stopPropagation(),e.toggleFavoriteTimeframe(i.value)}}})])}),0)})],2)])},c=[],p=m(u,d,c,!1,null,"623c21cf",null,null);const h=p.exports;export{h as default};
